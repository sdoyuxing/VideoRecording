(()=>{"use strict";var t={375:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VedioRecorder=void 0;const r=i(825);e.VedioRecorder=class{constructor(t){this.frames=[],this.video=t,this.canvas=document.createElement("canvas");let e=0;this.transition=new r.Transition((()=>{this.canvas.getContext("2d").drawImage(this.video,0,0,this.video.videoWidth,this.video.videoHeight),this.frames.push({duration:(new Date).getTime()-e,image:this.parseRIFF(atob(this.canvas.toDataURL("image/webp").slice(23)))}),e=(new Date).getTime()}))}record(){this.transition.start()}stop(){}parseRIFF(t){let e=0,i={};for(;e<t.length;){let r=t.substr(e,4),s=this.getStrLength(t,e),n=t.substr(e+4+4,s);e+=8+s,i[r]=i[r]||[],"RIFF"===r||"LIST"===r?i[r].push(this.parseRIFF(n)):i[r].push(n)}return i}getStrLength(t,e){return parseInt(t.substr(e+4,4).split("").map((function(t){let e=t.charCodeAt(0).toString(2);return console.log(new Array(8-e.length+1)),new Array(8-e.length+1).join("0")+e})).join(""),2)}}},519:(t,e,i)=>{const r=i(375);window.VideoRecording=class{constructor(t){this.recorder=new r.VedioRecorder(t)}startRecording(){this.recorder.record()}}},825:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Transition=void 0,e.Transition=class{constructor(t=(()=>{}),e){this.running=!0,this.requestAnimationFrame="undefined"!=typeof window&&window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||function(t){return setTimeout(t,16)},this.intervalTime=e,this.render=t}start(){this.running=!0,this.requestAnimationFrame((t=>{this.step(t)}))}step(t){void 0===this.startTime&&(this.startTime=t),this.interval=t-this.startTime,(void 0===this.intervalTime||this.interval>this.intervalTime)&&(this.render(),this.startTime=t),this.running&&this.requestAnimationFrame((t=>{this.step(t)}))}stop(){this.running=!1}setIntervalTime(t=0){this.intervalTime=t}getIntervalTime(){return this.intervalTime}setRender(t=(()=>{})){this.render=t}getRender(t=(()=>{})){return this.render}}}},e={};!function i(r){if(e[r])return e[r].exports;var s=e[r]={exports:{}};return t[r](s,s.exports,i),s.exports}(519)})();
//# sourceMappingURL=VideoRecording.js.map