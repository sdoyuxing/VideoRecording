(()=>{"use strict";var e={607:(e,t,i)=>{const r=i(825),s=i(476);window.VideoRecording=class{constructor(e,t){this.vedioElement=e,this.transition=new r.Transition(this.render.bind(this)),this.canvasElement=t||document.createElement("canvas"),this.recorder=new s.Record(this.canvasElement,"canvas"),this.context2d=this.canvasElement.getContext("2d"),0===this.vedioElement.videoWidth?this.vedioElement.onloadeddata=()=>{this.canvasElement.width=this.vedioElement.videoWidth,this.canvasElement.height=this.vedioElement.videoHeight}:(this.canvasElement.width=this.vedioElement.videoWidth,this.canvasElement.height=this.vedioElement.videoHeight)}startRecording(){this.recorder.startRecording(),this.render(),this.transition.start()}render(){this.context2d.drawImage(this.vedioElement,0,0,this.canvasElement.width,this.canvasElement.height)}stopRecording(){return this.transition.stop(),this.recorder.stopRecording()}getBlobs(){return this.recorder.getBlobs()}}},790:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasRecorder=void 0;const r=i(221);class s extends r.MediaStreamRecorder{constructor(e){super(new MediaStream),this.canvasElement=e}record(){let e;"captureStream"in this.canvasElement?e=this.canvasElement.captureStream(25):"mozCaptureStream"in this.canvasElement?e=this.canvasElement.mozCaptureStream(25):"webkitCaptureStream"in this.canvasElement&&(e=this.canvasElement.webkitCaptureStream(25)),this.mdStream.addTrack(this.getTracks(e,"video")[0]),super.record()}getTracks(e,t="audio"){return e&&e.getTracks?e.getTracks().filter((function(e){return e.kind===t})):[]}}t.CanvasRecorder=s},476:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Record=void 0;const r=i(790);t.Record=class{constructor(e,t="canvas"){"canvas"===t&&(this.recordObject=new r.CanvasRecorder(e))}startRecording(){this.recordObject.record()}stopRecording(){return this.recordObject.stop()}getBlobs(){return this.recordObject.getBlobs()}}},221:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MediaStreamRecorder=void 0,t.MediaStreamRecorder=class{constructor(e){this.blobs=[],this.mdStream=e}record(){this.mediaRecorder=new MediaRecorder(this.mdStream,{checkForInactiveTracks:!1,mimeType:"video/webm"}),this.mediaRecorder.start(36e5)}stop(){return new Promise((e=>{this.mediaRecorder.ondataavailable=t=>{t.data&&t.data.size&&(this.blobs.push(t.data),e(this.getBlobs()))},this.mediaRecorder.stop()}))}getBlobs(){return new Blob(this.blobs,{type:"video/webm"})}}},825:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Transition=void 0,t.Transition=class{constructor(e=(()=>{}),t){this.running=!0,this.requestAnimationFrame="undefined"!=typeof window&&window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||function(e){return setTimeout(e,16)},this.intervalTime=t,this.render=e}start(){this.requestAnimationFrame((e=>{this.step(e)}))}step(e){void 0===this.startTime&&(this.startTime=e),this.interval=e-this.startTime,(void 0===this.intervalTime||this.interval>this.intervalTime)&&(this.render(),this.startTime=e),this.running&&this.requestAnimationFrame((e=>{this.step(e)}))}stop(){this.running=!1}setIntervalTime(e=0){this.intervalTime=e}getIntervalTime(){return this.intervalTime}setRender(e=(()=>{})){this.render=e}getRender(e=(()=>{})){return this.render}}}},t={};!function i(r){if(t[r])return t[r].exports;var s=t[r]={exports:{}};return e[r](s,s.exports,i),s.exports}(607)})();